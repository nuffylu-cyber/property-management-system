# å¿«é€Ÿå…¥é—¨æŒ‡å— - 5åˆ†é’Ÿä¸Šæ‰‹

## ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼ŸæŒ‰è¿™ä¸ªé¡ºåºæ¥ï¼

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ç³»ç»Ÿï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# 1. æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰æˆ– PowerShell
# æŒ‰ Win+Rï¼Œè¾“å…¥ cmdï¼Œå›è½¦

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd D:\claude code\ç‰©ä¸šç®¡ç†ç³»ç»Ÿ

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
"C:\Users\Lupengfei\AppData\Local\Programs\Python\Python312\python.exe" -m venv venv
dir venv
venv\Scripts\activate

# çœ‹åˆ°å‘½ä»¤è¡Œå‰é¢å‡ºç° (venv) è¡¨ç¤ºæˆåŠŸ

# 4. å¯åŠ¨ç³»ç»Ÿ
python manage.py runserver
```

çœ‹åˆ°è¿™äº›å†…å®¹å°±æˆåŠŸäº†ï¼š
```
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
```

**ä¸è¦å…³é—­è¿™ä¸ªçª—å£ï¼** è®©å®ƒä¸€ç›´è¿è¡Œã€‚

---

### ç¬¬äºŒæ­¥ï¼šç™»å½•åå°ï¼ˆ1åˆ†é’Ÿï¼‰

1. æ‰“å¼€æµè§ˆå™¨
2. è®¿é—®ï¼šhttp://localhost:8000/admin
3. è¾“å…¥è´¦å·å¯†ç ï¼ˆå¦‚æœè¿˜æ²¡åˆ›å»ºï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼‰

**åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼š**
```bash
# æ–°å¼€ä¸€ä¸ªå‘½ä»¤æç¤ºç¬¦çª—å£
cd "D:\claude code\ç‰©ä¸šç®¡ç†ç³»ç»Ÿ"
venv\Scripts\activate
python manage.py createsuperuser

# æŒ‰æç¤ºè¾“å…¥
ç”¨æˆ·åï¼šadmin
é‚®ç®±ï¼šadmin@example.com
å¯†ç ï¼šè®¾ç½®ä¸€ä¸ªå¯†ç ï¼ˆè®°ä½å®ƒï¼ï¼‰
ç¡®è®¤å¯†ç ï¼šå†æ¬¡è¾“å…¥
```

---

### ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–æ•°æ®ï¼ˆ10åˆ†é’Ÿï¼‰

#### 1. åˆ›å»ºç¬¬ä¸€ä¸ªå°åŒºï¼ˆ30ç§’ï¼‰

```
1. ç‚¹å‡» "å°åŒºç®¡ç†" â†’ "å°åŒºs" â†’ "+ å¢åŠ "
2. å¡«å†™ï¼š
   - å°åŒºåç§°ï¼šé“¶åº§å°åŒº
   - å°åŒºåœ°å€ï¼šæµ‹è¯•åœ°å€
   - æ€»æˆ·æ•°ï¼š413
3. ç‚¹"ä¿å­˜"
```

#### 2. åˆ›å»ºæ¥¼æ ‹ï¼ˆ30ç§’ï¼‰

```
1. ç‚¹å‡» "å°åŒºç®¡ç†" â†’ "æ¥¼æ ‹s" â†’ "+ å¢åŠ "
2. å¡«å†™ï¼š
   - æ‰€å±å°åŒºï¼šé“¶åº§å°åŒº
   - æ¥¼æ ‹å·ï¼š1æ ‹
   - æ¥¼æ ‹ç±»å‹ï¼šé«˜å±‚
   - æ€»æ¥¼å±‚æ•°ï¼š32
   - å•å…ƒæ•°ï¼š2
3. ç‚¹"ä¿å­˜"
```

#### 3. åˆ›å»ºæˆ¿äº§ï¼ˆ1åˆ†é’Ÿï¼‰

```
1. ç‚¹å‡» "æˆ¿äº§ç®¡ç†" â†’ "æˆ¿äº§s" â†’ "+ å¢åŠ "
2. å¡«å†™ï¼š
   - æ‰€å±å°åŒºï¼šé“¶åº§å°åŒº
   - æ‰€å±æ¥¼æ ‹ï¼š1æ ‹
   - å•å…ƒå·ï¼š1å•å…ƒ
   - æ¥¼å±‚ï¼š1
   - æˆ¿å·ï¼š101
   - é¢ç§¯ï¼š89.5
   - æˆ¿äº§ç±»å‹ï¼šä½å®…
3. ç‚¹"ä¿å­˜"
```

**å»ºè®®ï¼š** å¤šåˆ›å»ºå‡ ä¸ªæˆ¿äº§ç”¨äºæµ‹è¯•ï¼ˆ102ã€201ã€202ç­‰ï¼‰

#### 4. åˆ›å»ºä¸šä¸»ï¼ˆ1åˆ†é’Ÿï¼‰

```
1. ç‚¹å‡» "æˆ¿äº§ç®¡ç†" â†’ "ä¸šä¸»s" â†’ "+ å¢åŠ "
2. å¡«å†™ï¼š
   - ä¸šä¸»å§“åï¼šå¼ ä¸‰
   - è”ç³»ç”µè¯ï¼š13800138000
   - èº«ä»½è¯å·ï¼š110101199001011234
   - æ˜¯å¦å·²è®¤è¯ï¼šâœ“
3. ç‚¹"ä¿å­˜"
```

#### 5. å…³è”ä¸šä¸»å’Œæˆ¿äº§ï¼ˆ2åˆ†é’Ÿï¼‰

ä½¿ç”¨ Python Shell å¿«é€Ÿå…³è”ï¼š

```bash
# æ–°å¼€å‘½ä»¤æç¤ºç¬¦
cd "D:\claude code\ç‰©ä¸šç®¡ç†ç³»ç»Ÿ"
venv\Scripts\activate
python manage.py shell
```

**å¤åˆ¶ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š**
```python
from apps.property.models import Owner, Property, OwnerProperty

# è·å–ä¸šä¸»
owner = Owner.objects.get(name='å¼ ä¸‰')

# è·å–æˆ¿äº§ï¼ˆå…³è”3å¥—æˆ¿äº§ï¼‰
properties = Property.objects.all()[:3]

# å…³è”
for prop in properties:
    OwnerProperty.objects.create(
        owner=owner,
        property=prop,
        ownership_type='full'
    )
    print(f"å·²å…³è”ï¼š{prop.full_address}")

print("å®Œæˆï¼")
```

è¾“å…¥ `exit()` é€€å‡ºã€‚

#### 6. åˆ›å»ºè´¹ç‡æ ‡å‡†ï¼ˆ1åˆ†é’Ÿï¼‰

```
1. ç‚¹å‡» "ç¼´è´¹ç®¡ç†" â†’ "ç‰©ä¸šè´¹æ ‡å‡†s" â†’ "+ å¢åŠ "
2. å¡«å†™ï¼š
   - æ‰€å±å°åŒºï¼šé“¶åº§å°åŒº
   - è´¹ç”¨åç§°ï¼šä½å®…ç‰©ä¸šè´¹
   - è´¹ç”¨ç±»å‹ï¼šç‰©ä¸šè´¹
   - æ¯å¹³ç±³å•ä»·ï¼š2.5
   - è®¡è´¹å‘¨æœŸï¼šæŒ‰æœˆ
   - æ˜¯å¦å¯ç”¨ï¼šâœ“
3. ç‚¹"ä¿å­˜"
```

#### 7. ç”Ÿæˆç¬¬ä¸€ä¸ªæœˆçš„è´¦å•ï¼ˆ3åˆ†é’Ÿï¼‰

ä½¿ç”¨ Python Shell æ‰¹é‡ç”Ÿæˆï¼š

```bash
python manage.py shell
```

**å¤åˆ¶ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š**
```python
from apps.payment.models import FeeStandard, PaymentBill
from apps.property.models import Property
from datetime import date
import uuid

# è·å–è´¹ç‡æ ‡å‡†
fee_standard = FeeStandard.objects.first()
if not fee_standard:
    print("é”™è¯¯ï¼šè¯·å…ˆåˆ›å»ºè´¹ç‡æ ‡å‡†ï¼")
    exit()

# è·å–æ‰€æœ‰æˆ¿äº§
properties = Property.objects.all()

# ç”Ÿæˆ2024å¹´1æœˆè´¦å•
billing_period = '2024-01'
due_date = date(2024, 1, 31)

created = 0
for prop in properties:
    # æ£€æŸ¥è´¦å•æ˜¯å¦å·²å­˜åœ¨
    if PaymentBill.objects.filter(
        property=prop,
        fee_type='property',
        billing_period=billing_period
    ).exists():
        print(f"è·³è¿‡ï¼š{prop.full_address} è´¦å•å·²å­˜åœ¨")
        continue

    # è·å–ä¸šä¸»
    owner_relation = prop.owners.first()
    if not owner_relation:
        print(f"è·³è¿‡ï¼š{prop.full_address} æœªå…³è”ä¸šä¸»")
        continue

    # è®¡ç®—é‡‘é¢ = é¢ç§¯ Ã— å•ä»·
    amount = prop.area * fee_standard.price_per_square

    # ç”Ÿæˆè´¦å•
    bill = PaymentBill.objects.create(
        bill_number=f"{billing_period.replace('-', '')}{str(uuid.uuid4().int)[:6]}",
        community=prop.community,
        property=prop,
        owner=owner_relation.owner,
        fee_type='property',
        billing_period=billing_period,
        amount=amount,
        due_date=due_date
    )
    created += 1
    print(f"âœ“ {prop.full_address}: {amount}å…ƒ")

print(f"\nå®Œæˆï¼å…±ç”Ÿæˆ {created} æ¡è´¦å•")
```

è¾“å…¥ `exit()` é€€å‡ºã€‚

---

### ç¬¬å››æ­¥ï¼šæŸ¥çœ‹æ•ˆæœï¼ˆ1åˆ†é’Ÿï¼‰

#### æŸ¥çœ‹è´¦å•
```
1. ç‚¹å‡» "ç¼´è´¹ç®¡ç†" â†’ "ç¼´è´¹è´¦å•s"
2. å¯ä»¥çœ‹åˆ°åˆšæ‰ç”Ÿæˆçš„æ‰€æœ‰è´¦å•
3. ç‚¹å‡»ä»»æ„è´¦å•æŸ¥çœ‹è¯¦æƒ…
```

#### æŸ¥çœ‹ç»Ÿè®¡
```
è®¿é—®ï¼šhttp://localhost:8000/api/payment/bills/statistics/
å¯ä»¥çœ‹åˆ°ï¼š
- æ€»è´¦å•æ•°
- æ€»é‡‘é¢
- å·²æ”¶/æœªæ”¶é‡‘é¢
```

#### åˆ›å»ºæµ‹è¯•æŠ¥äº‹
```
1. ç‚¹å‡» "æŠ¥äº‹ç®¡ç†" â†’ "æŠ¥äº‹è®°å½•s" â†’ "+ å¢åŠ "
2. å¡«å†™ï¼š
   - æ‰€å±å°åŒºï¼šé“¶åº§å°åŒº
   - æˆ¿äº§ï¼šé€‰æ‹©ä¸€ä¸ª
   - æŠ¥äº‹äººï¼šå¼ ä¸‰
   - è”ç³»ç”µè¯ï¼š13800138000
   - æŠ¥äº‹ç±»åˆ«ï¼šç”µå·¥
   - é—®é¢˜æè¿°ï¼šå¤§å ‚ç¯ä¸äº®
   - çŠ¶æ€ï¼šå¾…æ´¾å•
3. ç‚¹"ä¿å­˜"
```

---

### å®Œæˆï¼ç°åœ¨ä½ å¯ä»¥ï¼š

âœ… æŸ¥çœ‹å’Œç¼–è¾‘æ‰€æœ‰æ•°æ®
âœ… ç”Ÿæˆæ›´å¤šæœˆä»½çš„è´¦å•
âœ… å¤„ç†æŠ¥äº‹æ´¾å•
âœ… æŸ¥çœ‹ç¼´è´¹è®°å½•
âœ… åˆ›å»ºæ›´å¤šç”¨æˆ·

---

## å¸¸ç”¨æ“ä½œé€ŸæŸ¥

### æ¯æœˆç”Ÿæˆè´¦å•
```bash
python manage.py shell
```
```python
# ä¿®æ”¹æœˆä»½ï¼Œé‡æ–°è¿è¡Œä¸Šé¢çš„"ç”Ÿæˆè´¦å•"ä»£ç 
billing_period = '2024-02'  # æ”¹æˆ2æœˆ
due_date = date(2024, 2, 29)  # æ”¹æˆ2æœˆåº•
# ... å…¶ä½™ä»£ç ç›¸åŒ
```

### åˆ›å»ºæ–°ä¸šä¸»å¹¶å…³è”æˆ¿äº§
```python
from apps.property.models import Owner, Property, OwnerProperty

# åˆ›å»ºä¸šä¸»
owner = Owner.objects.create(
    name='æå››',
    phone='13900139000',
    id_card='110101199002022345',
    is_verified=True
)

# å…³è”æˆ¿äº§
property = Property.objects.get(room_number='102')
OwnerProperty.objects.create(
    owner=owner,
    property=property
)
```

### æŸ¥çœ‹æŸä¸ªä¸šä¸»çš„æ‰€æœ‰è´¦å•
```python
from apps.property.models import Owner
from apps.payment.models import PaymentBill

owner = Owner.objects.get(name='å¼ ä¸‰')
bills = PaymentBill.objects.filter(owner=owner)

for bill in bills:
    print(f"{bill.billing_period}: {bill.amount}å…ƒ - {bill.get_status_display()}")
```

### æ‰‹åŠ¨æ ‡è®°è´¦å•ä¸ºå·²ä»˜
```
1. æ‰¾åˆ°å¯¹åº”è´¦å•
2. ç‚¹å‡»è¿›å…¥è¯¦æƒ…
3. ä¿®æ”¹ï¼š
   - å·²ç¼´é‡‘é¢ï¼šï¼ˆè¾“å…¥å®é™…é‡‘é¢ï¼‰
   - çŠ¶æ€ï¼šå·²ç¼´
   - ç¼´è´¹æ—¶é—´ï¼šï¼ˆé€‰æ‹©æ—¥æœŸæ—¶é—´ï¼‰
4. ä¿å­˜
```

---

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åœæ­¢ç³»ç»Ÿï¼Ÿ
**A:** åœ¨è¿è¡Œ `python manage.py runserver` çš„çª—å£æŒ‰ `Ctrl + C`

### Q: ä¸‹æ¬¡æ€ä¹ˆå¯åŠ¨ï¼Ÿ
**A:**
```bash
cd "D:\claude code\ç‰©ä¸šç®¡ç†ç³»ç»Ÿ"
venv\Scripts\activate
python manage.py runserver
```

### Q: å¿˜è®°ç®¡ç†å‘˜å¯†ç æ€ä¹ˆåŠï¼Ÿ
**A:**
```bash
python manage.py shell
```
```python
from django.contrib.auth import get_user_model
User = get_user_model()
user = User.objects.get(username='admin')
user.set_password('æ–°å¯†ç ')
user.save()
```

### Q: è´¦å•ç”Ÿæˆå¤±è´¥ï¼Ÿ
**A:** æ£€æŸ¥ï¼š
1. æ˜¯å¦åˆ›å»ºäº†è´¹ç‡æ ‡å‡†ï¼Ÿ
2. æˆ¿äº§æ˜¯å¦å·²å…³è”ä¸šä¸»ï¼Ÿ
3. è¯¥æœˆä»½è´¦å•æ˜¯å¦å·²å­˜åœ¨ï¼Ÿ

### Q: å¦‚ä½•åˆ é™¤æ‰€æœ‰æµ‹è¯•æ•°æ®ï¼Ÿ
**A:**
```python
# è­¦å‘Šï¼šæ­¤æ“ä½œä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼
from apps.payment.models import PaymentBill
from apps.property.models import Owner, Property
from apps.community.models import Community

PaymentBill.objects.all().delete()
Owner.objects.all().delete()
Property.objects.all().delete()
Building.objects.all().delete()
Community.objects.all().delete()
```

---

## ä¸‹ä¸€æ­¥

- ğŸ“– é˜…è¯»ã€ŠPCåå°æ“ä½œæ‰‹å†Œ.mdã€‹äº†è§£è¯¦ç»†åŠŸèƒ½
- ğŸ”§ é…ç½®å¾®ä¿¡å…¬ä¼—å·ï¼ˆéœ€è¦ç”³è¯·æœåŠ¡å·ï¼‰
- ğŸ“Š å¯¼å…¥çœŸå®æ•°æ®ï¼ˆExcelæ‰¹é‡å¯¼å…¥ï¼‰
- ğŸ¨ æ ¹æ®éœ€è¦å®šåˆ¶åŠŸèƒ½

---

## å¿«æ·è®¿é—®

å°†ä»¥ä¸‹é“¾æ¥æ·»åŠ åˆ°æµè§ˆå™¨æ”¶è—å¤¹ï¼š

| åŠŸèƒ½ | é“¾æ¥ |
|------|------|
| åå°é¦–é¡µ | http://localhost:8000/admin |
| è´¦å•ç®¡ç† | http://localhost:8000/admin/payment/paymentbill/ |
| æŠ¥äº‹ç®¡ç† | http://localhost:8000/admin/maintenance/maintenancerequest/ |
| APIæ–‡æ¡£ | http://localhost:8000/swagger/ |

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼**

æœ‰é—®é¢˜ï¼ŸæŸ¥çœ‹ `docs/PCåå°æ“ä½œæ‰‹å†Œ.md` æˆ– `docs/å¼€å‘æŒ‡å—.md`
